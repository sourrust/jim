<!DOCTYPE html>  <html> <head>   <title>motions.coffee</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="ace.html">                 ace.coffee               </a>                                           <a class="source" href="commands.html">                 commands.coffee               </a>                                           <a class="source" href="helpers.html">                 helpers.coffee               </a>                                           <a class="source" href="jim.html">                 jim.coffee               </a>                                           <a class="source" href="keymap.html">                 keymap.coffee               </a>                                           <a class="source" href="modes.html">                 modes.coffee               </a>                                           <a class="source" href="motions.html">                 motions.coffee               </a>                                           <a class="source" href="operators.html">                 operators.coffee               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               motions.coffee             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>               <p>Motions are exactly that: motions.  They move the cursor but don't change the
document at all.  They can be used in normal or visual mode and can follow an
operator in normal mode to operate on the text that they move over.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="p">{</span><span class="nx">Command</span><span class="p">,</span> <span class="nx">repeatCountTimes</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span> <span class="s1">&#39;./helpers&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>The default key mappings are specified alongside the definitions of each
motion.  Accumulate the mappings so they can be exported.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">defaultMappings = </span><span class="p">{}</span>
<span class="nv">map = </span><span class="nf">(keys, motionClass) -&gt;</span> <span class="nx">defaultMappings</span><span class="p">[</span><span class="nx">keys</span><span class="p">]</span> <span class="o">=</span> <span class="nx">motionClass</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>base class for all motions</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="k">class</span> <span class="nx">Motion</span> <span class="k">extends</span> <span class="nx">Command</span>
  <span class="nv">constructor: </span><span class="nf">(@count = 1) -&gt;</span>
  <span class="nv">isRepeatable: </span><span class="kc">false</span>
  <span class="nv">linewise: </span><span class="kc">no</span>
  <span class="nv">exclusive: </span><span class="kc">no</span></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>motions do the same thing in visual mode</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">visualExec: </span><span class="nf">(jim) -&gt;</span> <span class="nx">@exec</span> <span class="nx">jim</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>Define an unmapped <code>Motion</code> that will be used for double operators (e.g. <code>cc</code>,
<code>2yy</code>, <code>3d4d</code>).</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="k">class</span> <span class="nx">LinewiseCommandMotion</span> <span class="k">extends</span> <span class="nx">Motion</span>
  <span class="nv">linewise: </span><span class="kc">yes</span>
  <span class="nv">exec: </span><span class="nf">(jim) -&gt;</span>
    <span class="k">if</span> <span class="nv">additionalLines = </span><span class="nx">@count</span> <span class="o">-</span> <span class="mi">1</span>
      <span class="k">new</span> <span class="nx">MoveDown</span><span class="p">(</span><span class="nx">additionalLines</span><span class="p">).</span><span class="nx">exec</span> <span class="nx">jim</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <h2>Basic directional motions</h2>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">map</span> <span class="s1">&#39;h&#39;</span><span class="p">,</span> <span class="k">class</span> <span class="nx">MoveLeft</span> <span class="k">extends</span> <span class="nx">Motion</span>
  <span class="nv">exclusive: </span><span class="kc">yes</span>
  <span class="nv">exec: </span><span class="nx">repeatCountTimes</span> <span class="nf">(jim) -&gt;</span> <span class="nx">jim</span><span class="p">.</span><span class="nx">adaptor</span><span class="p">.</span><span class="nx">moveLeft</span><span class="p">()</span>
<span class="nx">map</span> <span class="s1">&#39;j&#39;</span><span class="p">,</span> <span class="k">class</span> <span class="nx">MoveDown</span> <span class="k">extends</span> <span class="nx">Motion</span>
  <span class="nv">linewise: </span><span class="kc">yes</span>
  <span class="nv">exec: </span><span class="nx">repeatCountTimes</span> <span class="nf">(jim) -&gt;</span> <span class="nx">jim</span><span class="p">.</span><span class="nx">adaptor</span><span class="p">.</span><span class="nx">moveDown</span><span class="p">()</span>
<span class="nx">map</span> <span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="k">class</span> <span class="nx">MoveUp</span> <span class="k">extends</span> <span class="nx">Motion</span>
  <span class="nv">linewise: </span><span class="kc">yes</span>
  <span class="nv">exec: </span><span class="nx">repeatCountTimes</span> <span class="nf">(jim) -&gt;</span> <span class="nx">jim</span><span class="p">.</span><span class="nx">adaptor</span><span class="p">.</span><span class="nx">moveUp</span><span class="p">()</span>
<span class="nx">map</span> <span class="s1">&#39;l&#39;</span><span class="p">,</span> <span class="k">class</span> <span class="nx">MoveRight</span> <span class="k">extends</span> <span class="nx">Motion</span>
  <span class="nv">exclusive: </span><span class="kc">yes</span>
  <span class="nv">exec: </span><span class="nx">repeatCountTimes</span> <span class="nf">(jim) -&gt;</span> <span class="nx">jim</span><span class="p">.</span><span class="nx">adaptor</span><span class="p">.</span><span class="nx">moveRight</span> <span class="nx">@operation</span><span class="o">?</span></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <h2>Word motions</h2>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>Return a new regex with a fresh lastIndex each time for use in word motions.
There are two different kinds of words:</p>

<ul>
<li>A <strong>WORD</strong> is a string of non-whitespace characters.</li>
<li>A <strong>word</strong> is a string of regex word characters (i.e. <code>[A-Za-z0-9_]</code>) <em>or</em> a
string of non-whitespace non-word characters (i.e. special chars)</li>
</ul>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">WORDRegex = </span><span class="o">-&gt;</span> <span class="sr">/\S+/g</span> 
<span class="nv">wordRegex = </span><span class="o">-&gt;</span> <span class="sr">/(\w+)|([^\w\s]+)/g</span></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>Move to the next end of a <strong>word</strong>.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">map</span> <span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="k">class</span> <span class="nx">MoveToWordEnd</span> <span class="k">extends</span> <span class="nx">Motion</span>
  <span class="nv">exec: </span><span class="nx">repeatCountTimes</span> <span class="nf">(jim) -&gt;</span>
    <span class="nv">regex = </span><span class="k">if</span> <span class="nx">@bigWord</span> <span class="k">then</span> <span class="nx">WORDRegex</span><span class="p">()</span> <span class="k">else</span> <span class="nx">wordRegex</span><span class="p">()</span>
    <span class="nv">line = </span><span class="nx">jim</span><span class="p">.</span><span class="nx">adaptor</span><span class="p">.</span><span class="nx">lineText</span><span class="p">()</span>
    <span class="p">[</span><span class="nx">row</span><span class="p">,</span> <span class="nx">column</span><span class="p">]</span> <span class="o">=</span> <span class="nx">jim</span><span class="p">.</span><span class="nx">adaptor</span><span class="p">.</span><span class="nx">position</span><span class="p">()</span>
    <span class="nv">rightOfCursor = </span><span class="nx">line</span><span class="p">.</span><span class="nx">substring</span> <span class="nx">column</span>

    <span class="nv">matchOnLine = </span><span class="nx">regex</span><span class="p">.</span><span class="nx">exec</span> <span class="nx">rightOfCursor</span></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>If we're on top of the last char of a word we want to match the next one.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">if</span> <span class="nx">matchOnLine</span><span class="o">?</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">length</span> <span class="o">&lt;=</span> <span class="mi">1</span>
      <span class="nv">matchOnLine = </span><span class="nx">regex</span><span class="p">.</span><span class="nx">exec</span> <span class="nx">rightOfCursor</span></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p>If there's a match on the current line, go to the end of the word that's
been matched.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">if</span> <span class="nx">matchOnLine</span>
      <span class="nx">column</span> <span class="o">+=</span> <span class="nx">matchOnLine</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">length</span> <span class="o">+</span> <span class="nx">matchOnLine</span><span class="p">.</span><span class="nx">index</span> <span class="o">-</span> <span class="mi">1</span></pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <p>If there's no match on the current line go end of the next word, whatever
line that may be on.  If there are no more non-blank characters, don't
move the cursor.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">else</span>
      <span class="nx">loop</span>
        <span class="nv">line = </span><span class="nx">jim</span><span class="p">.</span><span class="nx">adaptor</span><span class="p">.</span><span class="nx">lineText</span> <span class="o">++</span><span class="nx">row</span>
        <span class="nv">firstMatchOnSubsequentLine = </span><span class="nx">regex</span><span class="p">.</span><span class="nx">exec</span> <span class="nx">line</span>
        <span class="k">if</span> <span class="nx">firstMatchOnSubsequentLine</span>
          <span class="nv">column = </span><span class="nx">firstMatchOnSubsequentLine</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">length</span> <span class="o">+</span> <span class="nx">firstMatchOnSubsequentLine</span><span class="p">.</span><span class="nx">index</span> <span class="o">-</span> <span class="mi">1</span>
          <span class="k">break</span>
        <span class="k">else</span> <span class="k">if</span> <span class="nx">row</span> <span class="o">is</span> <span class="nx">jim</span><span class="p">.</span><span class="nx">adaptor</span><span class="p">.</span><span class="nx">lastRow</span><span class="p">()</span>
          <span class="k">return</span></pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p>Move to the <code>row</code> and <code>column</code> that have been determined.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">jim</span><span class="p">.</span><span class="nx">adaptor</span><span class="p">.</span><span class="nx">moveTo</span> <span class="nx">row</span><span class="p">,</span> <span class="nx">column</span></pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p>Move to the next end of a <strong>WORD</strong>.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">map</span> <span class="s1">&#39;E&#39;</span><span class="p">,</span> <span class="k">class</span> <span class="nx">MoveToBigWordEnd</span> <span class="k">extends</span> <span class="nx">MoveToWordEnd</span>
  <span class="nv">bigWord: </span><span class="kc">yes</span></pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <p>Move to the next beginning of a <strong>word</strong>.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">map</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="k">class</span> <span class="nx">MoveToNextWord</span> <span class="k">extends</span> <span class="nx">Motion</span>
  <span class="nv">exclusive: </span><span class="kc">yes</span>
  <span class="nv">exec: </span><span class="nf">(jim) -&gt;</span>
    <span class="nv">timesLeft = </span><span class="nx">@count</span>
    <span class="k">while</span> <span class="nx">timesLeft</span><span class="o">--</span>
      <span class="nv">regex = </span><span class="k">if</span> <span class="nx">@bigWord</span> <span class="k">then</span> <span class="nx">WORDRegex</span><span class="p">()</span> <span class="k">else</span> <span class="nx">wordRegex</span><span class="p">()</span>
      <span class="nv">line = </span><span class="nx">jim</span><span class="p">.</span><span class="nx">adaptor</span><span class="p">.</span><span class="nx">lineText</span><span class="p">()</span>
      <span class="p">[</span><span class="nx">row</span><span class="p">,</span> <span class="nx">column</span><span class="p">]</span> <span class="o">=</span> <span class="nx">jim</span><span class="p">.</span><span class="nx">adaptor</span><span class="p">.</span><span class="nx">position</span><span class="p">()</span>
      <span class="nv">rightOfCursor = </span><span class="nx">line</span><span class="p">.</span><span class="nx">substring</span> <span class="nx">column</span>

      <span class="nv">match = </span><span class="nx">regex</span><span class="p">.</span><span class="nx">exec</span> <span class="nx">rightOfCursor</span></pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>               <p>If we're on top of part of a word, match the next one.</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nv">match = </span><span class="nx">regex</span><span class="p">.</span><span class="nx">exec</span> <span class="nx">rightOfCursor</span> <span class="k">if</span> <span class="nx">match</span><span class="o">?</span><span class="p">.</span><span class="nx">index</span> <span class="o">is</span> <span class="mi">0</span></pre></div>             </td>           </tr>                               <tr id="section-17">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-17">&#182;</a>               </div>               <p>If the match isn't on this line, find it on the next.</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">if</span> <span class="o">not</span> <span class="nx">match</span></pre></div>             </td>           </tr>                               <tr id="section-18">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-18">&#182;</a>               </div>               <p>If the user typed <code>dw</code> on the last word of a line, for instance, just
delete the rest of the word instead of deleting to the start of the
word on the next line.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">if</span> <span class="nx">timesLeft</span> <span class="o">is</span> <span class="mi">0</span> <span class="o">and</span> <span class="nx">@operation</span>
          <span class="nv">column = </span><span class="nx">line</span><span class="p">.</span><span class="nx">length</span>

        <span class="k">else</span>
          <span class="nv">line = </span><span class="nx">jim</span><span class="p">.</span><span class="nx">adaptor</span><span class="p">.</span><span class="nx">lineText</span> <span class="o">++</span><span class="nx">row</span>
          <span class="nv">nextLineMatch = </span><span class="nx">regex</span><span class="p">.</span><span class="nx">exec</span> <span class="nx">line</span>
          <span class="nv">column = </span><span class="nx">nextLineMatch</span><span class="o">?</span><span class="p">.</span><span class="nx">index</span> <span class="o">or</span> <span class="mi">0</span></pre></div>             </td>           </tr>                               <tr id="section-19">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-19">&#182;</a>               </div>               <p><code>cw</code> actually behaves like <code>ce</code> instead of <code>dwi</code>. So if this motion is
part of a <code>Change</code> operation, ensure that the last time the loop is
executed we execute a <code>MoveToWordEnd</code> instead.</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">else</span> <span class="k">if</span> <span class="nx">timesLeft</span> <span class="o">is</span> <span class="mi">0</span> <span class="o">and</span> <span class="nx">@operation</span><span class="o">?</span><span class="p">.</span><span class="nx">switchToMode</span> <span class="o">is</span> <span class="s1">&#39;insert&#39;</span>
        <span class="nv">lastMotion = </span><span class="k">new</span> <span class="nx">MoveToWordEnd</span><span class="p">()</span>
        <span class="nv">lastMotion.bigWord = </span><span class="nx">@bigWord</span>
        <span class="nx">lastMotion</span><span class="p">.</span><span class="nx">exec</span> <span class="nx">jim</span>
        <span class="vi">@exclusive = </span><span class="kc">no</span>
        <span class="k">return</span></pre></div>             </td>           </tr>                               <tr id="section-20">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-20">&#182;</a>               </div>               <p>If the match is on this line, go to the column.</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">else</span>
        <span class="nx">column</span> <span class="o">+=</span> <span class="nx">match</span><span class="p">.</span><span class="nx">index</span></pre></div>             </td>           </tr>                               <tr id="section-21">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-21">&#182;</a>               </div>               <p>Move to the <code>row</code> and <code>column</code> that have been determined.</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">jim</span><span class="p">.</span><span class="nx">adaptor</span><span class="p">.</span><span class="nx">moveTo</span> <span class="nx">row</span><span class="p">,</span> <span class="nx">column</span></pre></div>             </td>           </tr>                               <tr id="section-22">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-22">&#182;</a>               </div>               <p>Move to the next beginning of a <strong>WORD</strong>.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">map</span> <span class="s1">&#39;W&#39;</span><span class="p">,</span> <span class="k">class</span> <span class="nx">MoveToNextBigWord</span> <span class="k">extends</span> <span class="nx">MoveToNextWord</span>
  <span class="nv">bigWord: </span><span class="kc">yes</span></pre></div>             </td>           </tr>                               <tr id="section-23">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-23">&#182;</a>               </div>               <p>Build regexes to find the last instance of a word.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">lastWORDRegex = </span><span class="err">///#{WORDRegex().source}\s*$///</span>
<span class="nv">lastWordRegex = </span><span class="err">///(#{wordRegex().source})\s*$///</span></pre></div>             </td>           </tr>                               <tr id="section-24">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-24">&#182;</a>               </div>               <p>Move to the last beginning of a <strong>word</strong>.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">map</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="k">class</span> <span class="nx">MoveBackWord</span> <span class="k">extends</span> <span class="nx">Motion</span>
  <span class="nv">exclusive: </span><span class="kc">yes</span>
  <span class="nv">exec: </span><span class="nx">repeatCountTimes</span> <span class="nf">(jim) -&gt;</span>
    <span class="nv">regex = </span><span class="k">if</span> <span class="nx">@bigWord</span> <span class="k">then</span> <span class="nx">lastWORDRegex</span> <span class="k">else</span> <span class="nx">lastWordRegex</span>
    <span class="nv">line = </span><span class="nx">jim</span><span class="p">.</span><span class="nx">adaptor</span><span class="p">.</span><span class="nx">lineText</span><span class="p">()</span>
    <span class="p">[</span><span class="nx">row</span><span class="p">,</span> <span class="nx">column</span><span class="p">]</span> <span class="o">=</span> <span class="nx">jim</span><span class="p">.</span><span class="nx">adaptor</span><span class="p">.</span><span class="nx">position</span><span class="p">()</span>
    <span class="nv">leftOfCursor = </span><span class="nx">line</span><span class="p">.</span><span class="nx">substring</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">column</span>

    <span class="nv">match = </span><span class="nx">regex</span><span class="p">.</span><span class="nx">exec</span> <span class="nx">leftOfCursor</span>
    <span class="k">if</span> <span class="nx">match</span>
      <span class="nv">column = </span><span class="nx">match</span><span class="p">.</span><span class="nx">index</span></pre></div>             </td>           </tr>                               <tr id="section-25">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-25">&#182;</a>               </div>               <p>If there are no matches left of the cursor, go to the last word on the
previous line.  Vim skips lines that are have only whitespace on them, but
not completely empty lines.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">else</span>
      <span class="nx">row</span><span class="o">--</span>
      <span class="nx">row</span><span class="o">--</span> <span class="k">while</span> <span class="sr">/^\s+$/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nv">line = </span><span class="nx">jim</span><span class="p">.</span><span class="nx">adaptor</span><span class="p">.</span><span class="nx">lineText</span> <span class="nx">row</span><span class="p">)</span>
      <span class="nv">match = </span><span class="nx">regex</span><span class="p">.</span><span class="nx">exec</span> <span class="nx">line</span>
      <span class="nv">column = </span><span class="nx">match</span><span class="o">?</span><span class="p">.</span><span class="nx">index</span> <span class="o">or</span> <span class="mi">0</span></pre></div>             </td>           </tr>                               <tr id="section-26">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-26">&#182;</a>               </div>               <p>Move to the <code>row</code> and <code>column</code> that have been determined.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">jim</span><span class="p">.</span><span class="nx">adaptor</span><span class="p">.</span><span class="nx">moveTo</span> <span class="nx">row</span><span class="p">,</span> <span class="nx">column</span></pre></div>             </td>           </tr>                               <tr id="section-27">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-27">&#182;</a>               </div>               <p>Move to the last beginning of a <strong>WORD</strong>.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">map</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="k">class</span> <span class="nx">MoveBackBigWord</span> <span class="k">extends</span> <span class="nx">MoveBackWord</span>
  <span class="nv">bigWord: </span><span class="kc">yes</span>
  </pre></div>             </td>           </tr>                               <tr id="section-28">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-28">&#182;</a>               </div>               <h2>Other left/right motions</h2>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-29">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-29">&#182;</a>               </div>               <p>Move to the first column on the line.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">map</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="k">class</span> <span class="nx">MoveToBeginningOfLine</span> <span class="k">extends</span> <span class="nx">Motion</span>
  <span class="nv">exclusive: </span><span class="kc">yes</span>
  <span class="nv">exec: </span><span class="nf">(jim) -&gt;</span> <span class="nx">jim</span><span class="p">.</span><span class="nx">adaptor</span><span class="p">.</span><span class="nx">moveTo</span> <span class="nx">jim</span><span class="p">.</span><span class="nx">adaptor</span><span class="p">.</span><span class="nx">row</span><span class="p">(),</span> <span class="mi">0</span></pre></div>             </td>           </tr>                               <tr id="section-30">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-30">&#182;</a>               </div>               <p>Move to the first non-blank character on the line.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">map</span> <span class="s1">&#39;^&#39;</span><span class="p">,</span> <span class="k">class</span> <span class="nx">MoveToFirstNonBlank</span> <span class="k">extends</span> <span class="nx">Motion</span>
  <span class="nv">exec: </span><span class="nf">(jim) -&gt;</span>
    <span class="nv">row = </span><span class="nx">jim</span><span class="p">.</span><span class="nx">adaptor</span><span class="p">.</span><span class="nx">row</span><span class="p">()</span>
    <span class="nv">line = </span><span class="nx">jim</span><span class="p">.</span><span class="nx">adaptor</span><span class="p">.</span><span class="nx">lineText</span> <span class="nx">row</span>
    <span class="nv">column = </span><span class="sr">/\S/</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">line</span><span class="p">)</span><span class="o">?</span><span class="p">.</span><span class="nx">index</span> <span class="o">or</span> <span class="mi">0</span>
    <span class="nx">jim</span><span class="p">.</span><span class="nx">adaptor</span><span class="p">.</span><span class="nx">moveTo</span> <span class="nx">row</span><span class="p">,</span> <span class="nx">column</span></pre></div>             </td>           </tr>                               <tr id="section-31">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-31">&#182;</a>               </div>               <p>Move to the last column on the line.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">map</span> <span class="s1">&#39;$&#39;</span><span class="p">,</span> <span class="k">class</span> <span class="nx">MoveToEndOfLine</span> <span class="k">extends</span> <span class="nx">Motion</span>
  <span class="nv">exec: </span><span class="nf">(jim) -&gt;</span>
    <span class="nv">additionalLines = </span><span class="nx">@count</span> <span class="o">-</span> <span class="mi">1</span>
    <span class="k">new</span> <span class="nx">MoveDown</span><span class="p">(</span><span class="nx">additionalLines</span><span class="p">).</span><span class="nx">exec</span> <span class="nx">jim</span> <span class="k">if</span> <span class="nx">additionalLines</span>
    <span class="nx">jim</span><span class="p">.</span><span class="nx">adaptor</span><span class="p">.</span><span class="nx">moveToLineEnd</span><span class="p">()</span></pre></div>             </td>           </tr>                               <tr id="section-32">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-32">&#182;</a>               </div>               <h2>Jump motions</h2>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-33">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-33">&#182;</a>               </div>               <p>Go to <code>{count}</code> line number or the first line.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">map</span> <span class="s1">&#39;gg&#39;</span><span class="p">,</span> <span class="k">class</span> <span class="nx">GoToLine</span> <span class="k">extends</span> <span class="nx">Motion</span>
  <span class="nv">linewise: </span><span class="kc">yes</span>
  <span class="nv">exec: </span><span class="nf">(jim) -&gt;</span>
    <span class="nv">rowNumber = </span><span class="nx">@count</span> <span class="o">-</span> <span class="mi">1</span>
    <span class="nv">lineText = </span><span class="nx">jim</span><span class="p">.</span><span class="nx">adaptor</span><span class="p">.</span><span class="nx">lineText</span> <span class="nx">rowNumber</span>
    <span class="nx">jim</span><span class="p">.</span><span class="nx">adaptor</span><span class="p">.</span><span class="nx">moveTo</span> <span class="nx">rowNumber</span><span class="p">,</span> <span class="mi">0</span>
    <span class="k">new</span> <span class="nx">MoveToFirstNonBlank</span><span class="p">().</span><span class="nx">exec</span> <span class="nx">jim</span></pre></div>             </td>           </tr>                               <tr id="section-34">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-34">&#182;</a>               </div>               <p>Go to <code>{count}</code> line number or the last line.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">map</span> <span class="s1">&#39;G&#39;</span><span class="p">,</span> <span class="k">class</span> <span class="nx">GoToLineOrEnd</span> <span class="k">extends</span> <span class="nx">GoToLine</span>
  <span class="nv">constructor: </span><span class="nf">(@count) -&gt;</span>
  <span class="nv">exec: </span><span class="nf">(jim) -&gt;</span>
    <span class="nx">@count</span> <span class="o">or=</span> <span class="nx">jim</span><span class="p">.</span><span class="nx">adaptor</span><span class="p">.</span><span class="nx">lastRow</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">super</span></pre></div>             </td>           </tr>                               <tr id="section-35">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-35">&#182;</a>               </div>               <p>Go to the first line that's visible in the viewport.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">map</span> <span class="s1">&#39;H&#39;</span><span class="p">,</span> <span class="k">class</span> <span class="nx">GoToFirstVisibleLine</span> <span class="k">extends</span> <span class="nx">Motion</span>
  <span class="nv">linewise: </span><span class="kc">yes</span>
  <span class="nv">exec: </span><span class="nf">(jim) -&gt;</span>
    <span class="nv">line = </span><span class="nx">jim</span><span class="p">.</span><span class="nx">adaptor</span><span class="p">.</span><span class="nx">firstFullyVisibleRow</span><span class="p">()</span> <span class="o">+</span> <span class="nx">@count</span>
    <span class="k">new</span> <span class="nx">GoToLineOrEnd</span><span class="p">(</span><span class="nx">line</span><span class="p">).</span><span class="nx">exec</span> <span class="nx">jim</span></pre></div>             </td>           </tr>                               <tr id="section-36">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-36">&#182;</a>               </div>               <p>Go to the middle line of the lines that exist and are visible in the viewport.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">map</span> <span class="s1">&#39;M&#39;</span><span class="p">,</span> <span class="k">class</span> <span class="nx">GoToMiddleLine</span> <span class="k">extends</span> <span class="nx">Motion</span>
  <span class="nv">linewise: </span><span class="kc">yes</span>
  <span class="nv">exec: </span><span class="nf">(jim) -&gt;</span>
    <span class="nv">topRow = </span><span class="nx">jim</span><span class="p">.</span><span class="nx">adaptor</span><span class="p">.</span><span class="nx">firstFullyVisibleRow</span><span class="p">()</span>
    <span class="nv">lines = </span><span class="nx">jim</span><span class="p">.</span><span class="nx">adaptor</span><span class="p">.</span><span class="nx">lastFullyVisibleRow</span><span class="p">()</span> <span class="o">-</span> <span class="nx">topRow</span>
    <span class="nv">linesFromTop = </span><span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">lines</span> <span class="err">/ 2)</span>
    <span class="k">new</span> <span class="nx">GoToLineOrEnd</span><span class="p">(</span><span class="nx">topRow</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">+</span> <span class="nx">linesFromTop</span><span class="p">).</span><span class="nx">exec</span> <span class="nx">jim</span></pre></div>             </td>           </tr>                               <tr id="section-37">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-37">&#182;</a>               </div>               <p>Go to the last line of the lines that exist and are visible in the viewport.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">map</span> <span class="s1">&#39;L&#39;</span><span class="p">,</span> <span class="k">class</span> <span class="nx">GoToLastVisibleLine</span> <span class="k">extends</span> <span class="nx">Motion</span>
  <span class="nv">linewise: </span><span class="kc">yes</span>
  <span class="nv">exec: </span><span class="nf">(jim) -&gt;</span>
    <span class="nv">line = </span><span class="nx">jim</span><span class="p">.</span><span class="nx">adaptor</span><span class="p">.</span><span class="nx">lastFullyVisibleRow</span><span class="p">()</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">-</span> <span class="nx">@count</span>
    <span class="k">new</span> <span class="nx">GoToLineOrEnd</span><span class="p">(</span><span class="nx">line</span><span class="p">).</span><span class="nx">exec</span> <span class="nx">jim</span></pre></div>             </td>           </tr>                               <tr id="section-38">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-38">&#182;</a>               </div>               <h2>Search motions</h2>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-39">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-39">&#182;</a>               </div>               <p>Prompt the user for a search term and search forward for it.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">map</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="k">class</span> <span class="nx">Search</span> <span class="k">extends</span> <span class="nx">Motion</span></pre></div>             </td>           </tr>                               <tr id="section-40">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-40">&#182;</a>               </div>               <p>Given that <code>jim.search</code> has already been set, search for the <code>{count}</code>'th
occurrence of the search.  Reverse <code>jim.search</code>'s direction if <code>reverse</code> is
true.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="vi">@runSearch: </span><span class="nf">(jim, count, reverse) -&gt;</span>
    <span class="k">return</span> <span class="k">if</span> <span class="o">not</span> <span class="nx">jim</span><span class="p">.</span><span class="nx">search</span>
    <span class="p">{</span><span class="nx">backwards</span><span class="p">,</span> <span class="nx">searchString</span><span class="p">,</span> <span class="nx">wholeWord</span><span class="p">}</span> <span class="o">=</span> <span class="nx">jim</span><span class="p">.</span><span class="nx">search</span>
    <span class="nv">backwards = </span><span class="o">not</span> <span class="nx">backwards</span> <span class="k">if</span> <span class="nx">reverse</span>
    <span class="nx">jim</span><span class="p">.</span><span class="nx">adaptor</span><span class="p">.</span><span class="nx">search</span> <span class="nx">backwards</span><span class="p">,</span> <span class="nx">searchString</span><span class="p">,</span> <span class="nx">wholeWord</span> <span class="k">while</span> <span class="nx">count</span><span class="o">--</span>

  <span class="nv">exclusive: </span><span class="kc">yes</span>
  <span class="nv">getSearch: </span><span class="o">-&gt;</span> <span class="p">{</span><span class="nv">searchString: </span><span class="nx">prompt</span><span class="p">(</span><span class="s2">&quot;Find:&quot;</span><span class="p">),</span> <span class="nx">@backwards</span><span class="p">}</span>
  <span class="nv">exec: </span><span class="nf">(jim) -&gt;</span>
    <span class="nv">jim.search = </span><span class="nx">@getSearch</span> <span class="nx">jim</span>
    <span class="nx">Search</span><span class="p">.</span><span class="nx">runSearch</span> <span class="nx">jim</span><span class="p">,</span> <span class="nx">@count</span></pre></div>             </td>           </tr>                               <tr id="section-41">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-41">&#182;</a>               </div>               <p>Prompt the user for a search term and search backwards for it.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">map</span> <span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="k">class</span> <span class="nx">SearchBackwards</span> <span class="k">extends</span> <span class="nx">Search</span>
  <span class="nv">backwards: </span><span class="kc">yes</span></pre></div>             </td>           </tr>                               <tr id="section-42">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-42">&#182;</a>               </div>               <p>Search fowards for the next occurrence of the nearest word.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">map</span> <span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="k">class</span> <span class="nx">NearestWordSearch</span> <span class="k">extends</span> <span class="nx">Search</span>
  <span class="nv">getSearch: </span><span class="nf">(jim) -&gt;</span>
    <span class="p">[</span><span class="nx">searchString</span><span class="p">,</span> <span class="nx">charsAhead</span><span class="p">]</span> <span class="o">=</span> <span class="nx">nearestWord</span> <span class="nx">jim</span></pre></div>             </td>           </tr>                               <tr id="section-43">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-43">&#182;</a>               </div>               <p>If we're searching for a word that's ahead of the cursor, ensure that the
search starts beyond it.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">new</span> <span class="nx">MoveRight</span><span class="p">(</span><span class="nx">charsAhead</span><span class="p">).</span><span class="nx">exec</span> <span class="nx">jim</span> <span class="k">if</span> <span class="nx">charsAhead</span></pre></div>             </td>           </tr>                               <tr id="section-44">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-44">&#182;</a>               </div>               <p>Match only whole words unless searching for special chars.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">wholeWord = </span><span class="sr">/^\w/</span><span class="p">.</span><span class="nx">test</span> <span class="nx">searchString</span>

    <span class="p">{</span><span class="nx">searchString</span><span class="p">,</span> <span class="nx">wholeWord</span><span class="p">,</span> <span class="nx">@backwards</span><span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-45">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-45">&#182;</a>               </div>               <p>The word used for <code>*</code> and <code>#</code> is the first of the following that matches on
the line:</p>

<ol>
<li>The <code>\w+</code> word under or after the cursor</li>
<li>The first string of non-blanks (i.e. <code>\S+</code>) under or after the cursor</li>
</ol>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">nearestWord = </span><span class="nf">(jim) -&gt;</span>
    <span class="nv">line = </span><span class="nx">jim</span><span class="p">.</span><span class="nx">adaptor</span><span class="p">.</span><span class="nx">lineText</span><span class="p">()</span>
    <span class="nv">column = </span><span class="nx">jim</span><span class="p">.</span><span class="nx">adaptor</span><span class="p">.</span><span class="nx">column</span><span class="p">()</span>
    <span class="nv">leftOfCursor = </span><span class="nx">line</span><span class="p">.</span><span class="nx">substring</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">column</span>
    <span class="nv">rightOfCursor = </span><span class="nx">line</span><span class="p">.</span><span class="nx">substring</span> <span class="nx">column</span>
    <span class="nv">charsAhead = </span><span class="kc">null</span>

    <span class="k">if</span> <span class="sr">/\W/</span><span class="p">.</span><span class="nx">test</span> <span class="nx">line</span><span class="p">[</span><span class="nx">column</span><span class="p">]</span>
      <span class="nv">leftMatch = </span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">]</span>
      <span class="nv">nextWord = </span><span class="sr">/\w+/</span><span class="p">.</span><span class="nx">exec</span> <span class="nx">rightOfCursor</span>
      <span class="nv">rightMatch = </span><span class="k">if</span> <span class="o">not</span> <span class="nx">nextWord</span>
        <span class="sr">/[^\w\s]+/</span><span class="p">.</span><span class="nx">exec</span> <span class="nx">rightOfCursor</span>
      <span class="k">else</span>
        <span class="nx">nextWord</span>
      <span class="nv">charsAhead = </span><span class="nx">rightMatch</span><span class="p">.</span><span class="nx">index</span>
    <span class="k">else</span>
      <span class="nv">leftMatch = </span><span class="sr">/\w*$/</span><span class="p">.</span><span class="nx">exec</span> <span class="nx">leftOfCursor</span>
      <span class="nv">rightMatch = </span><span class="sr">/^\w*/</span><span class="p">.</span><span class="nx">exec</span> <span class="nx">rightOfCursor</span>

    <span class="p">[</span><span class="nx">leftMatch</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="nx">rightMatch</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">charsAhead</span><span class="p">]</span></pre></div>             </td>           </tr>                               <tr id="section-46">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-46">&#182;</a>               </div>               <p>Search backwards for the next occurrence of the nearest word.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">map</span> <span class="s1">&#39;#&#39;</span><span class="p">,</span> <span class="k">class</span> <span class="nx">NearestWordSearchBackwards</span> <span class="k">extends</span> <span class="nx">NearestWordSearch</span>
  <span class="nv">backwards: </span><span class="kc">yes</span>
  </pre></div>             </td>           </tr>                               <tr id="section-47">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-47">&#182;</a>               </div>               <p>Repeat the last search.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">map</span> <span class="s1">&#39;n&#39;</span><span class="p">,</span> <span class="k">class</span> <span class="nx">SearchAgain</span> <span class="k">extends</span> <span class="nx">Motion</span>
  <span class="nv">exclusive: </span><span class="kc">yes</span>
  <span class="nv">exec: </span><span class="nf">(jim) -&gt;</span> <span class="nx">Search</span><span class="p">.</span><span class="nx">runSearch</span> <span class="nx">jim</span><span class="p">,</span> <span class="nx">@count</span></pre></div>             </td>           </tr>                               <tr id="section-48">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-48">&#182;</a>               </div>               <p>Repeat the last search, reversing the direction.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">map</span> <span class="s1">&#39;N&#39;</span><span class="p">,</span> <span class="k">class</span> <span class="nx">SearchAgainReverse</span> <span class="k">extends</span> <span class="nx">Motion</span>
  <span class="nv">exclusive: </span><span class="kc">yes</span>
  <span class="nv">exec: </span><span class="nf">(jim) -&gt;</span> <span class="nx">Search</span><span class="p">.</span><span class="nx">runSearch</span> <span class="nx">jim</span><span class="p">,</span> <span class="nx">@count</span><span class="p">,</span> <span class="kc">true</span></pre></div>             </td>           </tr>                               <tr id="section-49">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-49">&#182;</a>               </div>               <h2>Move-to-character motions</h2>

<p>These motions are expected to get a be followed by a character keypress.  When
they are executed this character is stored as the command's <code>@followedBy</code>.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-50">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-50">&#182;</a>               </div>               <p>Go to the next <code>@followedBy</code> char on the line.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">map</span> <span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="k">class</span> <span class="nx">GoToNextChar</span> <span class="k">extends</span> <span class="nx">Motion</span>
  <span class="vi">@followedBy: </span><span class="sr">/./</span>
  <span class="nv">exec: </span><span class="nf">(jim) -&gt;</span>
    <span class="nv">timesLeft = </span><span class="nx">@count</span> <span class="o">?</span> <span class="mi">1</span>
    <span class="p">[</span><span class="nx">row</span><span class="p">,</span> <span class="nx">column</span><span class="p">]</span> <span class="o">=</span> <span class="nx">jim</span><span class="p">.</span><span class="nx">adaptor</span><span class="p">.</span><span class="nx">position</span><span class="p">()</span>
    <span class="nv">rightOfCursor = </span><span class="nx">jim</span><span class="p">.</span><span class="nx">adaptor</span><span class="p">.</span><span class="nx">lineText</span><span class="p">().</span><span class="nx">substring</span> <span class="nx">column</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="nv">columnsRight = </span><span class="mi">0</span>
    <span class="k">while</span> <span class="nx">timesLeft</span><span class="o">--</span>
      <span class="nv">columnsRight = </span><span class="nx">rightOfCursor</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">@followedBy</span><span class="p">,</span> <span class="nx">columnsRight</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="nx">columnsRight</span>
      <span class="nx">columnsRight</span><span class="o">--</span> <span class="k">if</span> <span class="nx">@beforeChar</span>
      <span class="nx">jim</span><span class="p">.</span><span class="nx">adaptor</span><span class="p">.</span><span class="nx">moveTo</span> <span class="nx">row</span><span class="p">,</span> <span class="nx">column</span> <span class="o">+</span> <span class="nx">columnsRight</span></pre></div>             </td>           </tr>                               <tr id="section-51">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-51">&#182;</a>               </div>               <p>Go to the char before the next <code>@followedBy</code> char on the line.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">map</span> <span class="s1">&#39;t&#39;</span><span class="p">,</span> <span class="k">class</span> <span class="nx">GoUpToNextChar</span> <span class="k">extends</span> <span class="nx">GoToNextChar</span>
  <span class="nv">beforeChar: </span><span class="kc">yes</span></pre></div>             </td>           </tr>                               <tr id="section-52">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-52">&#182;</a>               </div>               <p>Go to the previous <code>@followedBy</code> char on the line.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">map</span> <span class="s1">&#39;F&#39;</span><span class="p">,</span> <span class="k">class</span> <span class="nx">GoToPreviousChar</span> <span class="k">extends</span> <span class="nx">Motion</span>
  <span class="vi">@followedBy: </span><span class="sr">/./</span>
  <span class="nv">exec: </span><span class="nf">(jim) -&gt;</span>
    <span class="nv">timesLeft = </span><span class="nx">@count</span> <span class="o">?</span> <span class="mi">1</span>
    <span class="p">[</span><span class="nx">row</span><span class="p">,</span> <span class="nx">column</span><span class="p">]</span> <span class="o">=</span> <span class="nx">jim</span><span class="p">.</span><span class="nx">adaptor</span><span class="p">.</span><span class="nx">position</span><span class="p">()</span>
    <span class="nv">leftOfCursor = </span><span class="nx">jim</span><span class="p">.</span><span class="nx">adaptor</span><span class="p">.</span><span class="nx">lineText</span><span class="p">().</span><span class="nx">substring</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">column</span>
    <span class="nv">targetColumn = </span><span class="nx">column</span>
    <span class="k">while</span> <span class="nx">timesLeft</span><span class="o">--</span>
      <span class="nv">targetColumn = </span><span class="nx">leftOfCursor</span><span class="p">.</span><span class="nx">lastIndexOf</span><span class="p">(</span><span class="nx">@followedBy</span><span class="p">,</span> <span class="nx">targetColumn</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="nx">targetColumn</span> <span class="o">&lt;</span> <span class="nx">column</span>
      <span class="nx">targetColumn</span><span class="o">++</span> <span class="k">if</span> <span class="nx">@beforeChar</span>
      <span class="nx">jim</span><span class="p">.</span><span class="nx">adaptor</span><span class="p">.</span><span class="nx">moveTo</span> <span class="nx">row</span><span class="p">,</span> <span class="nx">targetColumn</span></pre></div>             </td>           </tr>                               <tr id="section-53">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-53">&#182;</a>               </div>               <p>Go to the char after the previous <code>@followedBy</code> char on the line.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">map</span> <span class="s1">&#39;T&#39;</span><span class="p">,</span> <span class="k">class</span> <span class="nx">GoUpToPreviousChar</span> <span class="k">extends</span> <span class="nx">GoToPreviousChar</span>
  <span class="nv">beforeChar: </span><span class="kc">yes</span></pre></div>             </td>           </tr>                               <tr id="section-54">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-54">&#182;</a>               </div>               <h2>Exports</h2>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">module.exports = </span><span class="p">{</span>
  <span class="nx">GoToLine</span><span class="p">,</span> <span class="nx">MoveDown</span><span class="p">,</span> <span class="nx">MoveLeft</span><span class="p">,</span> <span class="nx">MoveRight</span><span class="p">,</span> <span class="nx">MoveToEndOfLine</span><span class="p">,</span> <span class="nx">MoveToFirstNonBlank</span><span class="p">,</span> <span class="nx">LinewiseCommandMotion</span><span class="p">,</span>
  <span class="nx">MoveToNextBigWord</span><span class="p">,</span> <span class="nx">MoveToNextWord</span><span class="p">,</span> <span class="nx">MoveToBigWordEnd</span><span class="p">,</span> <span class="nx">MoveToWordEnd</span><span class="p">,</span> <span class="nx">defaultMappings</span>
<span class="p">}</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 